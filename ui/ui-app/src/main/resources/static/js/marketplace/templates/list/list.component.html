<td-layout>
  <mat-toolbar>
    <mat-toolbar-row>
      <span>Marketplace</span>
      <span class="flex">
        <td-search-box backIcon="arrow_back"
                     placeholder="Search Marketplace for feeds or templates"
                     [(ngModel)]="searchTerm"
                     [showUnderline]="true"
                     (debounce)="0" [alwaysVisible]="false"
                     (searchDebounce)="search($event)"
                     (search)="searchTerm = $event">
        </td-search-box>
        </span>
      </mat-toolbar-row>
  </mat-toolbar>
  <ng-container>
    <mat-card>
      <mat-nav-list *ngIf="templates.length > 0">
        <button class="md-raised md-primary md-button ng-scope md-kylo-theme" type="button" (click)="importTemplates()">
          Import
        </button>
        <ng-template let-item let-last="last" ngFor [ngForOf]="filteredTemplates">
          <mat-list-item matRipple class="cursor-pointer">
            <div flex="30" layout="column" class="item-column md-list-item-text">
              <ng-md-icon icon="check_circle" style="fill:green" size="20" *ngIf="item.installed"></ng-md-icon>
              <mat-checkbox *ngIf="!item.installed" (change)="toggleImportTemplate($event, item)">
              </mat-checkbox>
            </div>
            <div flex="30" layout="column" style="overflow:hidden; text-overflow:ellipsis;" class="item-column md-list-item-text" (click)="importTemplate(item)">
                        <span class="item-title" >
                           {{item.templateName}}
                        </span>
              <span class="column-title column-title-bottom">File Name: {{item.fileName}} | Description: {{item.description}}</span>
            </div>
          </mat-list-item>
          <mat-divider *ngIf="!last"></mat-divider>
        </ng-template>

        <td-paging-bar #pagingBar [pageSize]="pageSize" [total]="filteredTotal" (change)="page($event)">
          <span hide-xs>Rows per page:</span>
          <mat-select [style.width.px]="50" [(ngModel)]="pageSize">
            <mat-option *ngFor="let size of [50, 100, 200, 500]" [value]="size">
              {{size}}
            </mat-option>
          </mat-select>
          {{pagingBar.range}} <span hide-xs>of {{pagingBar.total}}</span>
        </td-paging-bar>
      </mat-nav-list>

      <div *ngIf="templates.length == 0" class="connectors-empty" fxLayout="column" fxLayoutAlign="center center">
        <ng-md-icon class="tc-grey-500" icon="find_in_page" size="96"></ng-md-icon>
        <h2>No Templates</h2>
        <span>There are no available templates.</span>
      </div>
    </mat-card>
  </ng-container>

</td-layout>