<mat-card>
        <mat-card-content>

                <mat-horizontal-stepper [linear]="true"  (selectionChange)="onStepSelectionChanged($event)" >
                        <ng-container *ngFor="let tab of tabs">
                                <mat-step *ngIf="tab.sref == '.browse'">
                                        <form  fxFlex="1 1 auto" fxLayout="column">
                                                <ng-template matStepLabel>{{tab.label}}</ng-template>
                                                <remote-files [fileRowTemplate]="fileRowTemplate" *ngIf="selectedTab && selectedTab.sref =='.browse'" [datasource]="datasource" [useRouterStates]="false" [params]="params"     >



                                                </remote-files>
                                        </form>
                                </mat-step>

                                <mat-step *ngIf="tab.sref =='.preview'">
                                        <form  fxFlex="1 1 auto" fxLayout="column">
                                                <ng-template matStepLabel>{{tab.label}}</ng-template>
                                                <preview-schema *ngIf="selectedTab && selectedTab.sref =='.preview'" [paths]="paths" [datasource]="datasource" [editable]="!feed.readonly" [autoCollect]="true" addToCollectionButtonName="Select as source"  removeFromCollectionButtonName="Remove source" (customDatasetAddition)="onDatasetAdd($event)" (customDatasetRemoval)="onDatasetRemoval($event)"></preview-schema>
                                        </form>
                                </mat-step>


                        </ng-container>
                </mat-horizontal-stepper>
        </mat-card-content>
</mat-card>


<ng-template #fileRowTemplate let-file="file" let-columns="columns"  let-parent="parent">

        <td td-data-table-cell>
              <button mat-button>Add </button>
          <mat-checkbox [checked]="parent.isChildSelected(file.name)"
                        [disabled]="parent.isSelectChildDisabled(file.name)"
                        (change)="parent.onToggleChild($event, file)"></mat-checkbox>
          <td-notification-count *ngIf="parent.numberOfSelectedDescendants(file.name) > 0" color="accent" [notifications]="parent.numberOfSelectedDescendants(file.name)"
                                 [positionX]="after" [positionY]="bottom" style="margin-top: -15px; margin-left: -3px; margin-right: -30px; min-height: 0; min-width: 0"></td-notification-count>

        </td>
        <td td-data-table-cell *ngFor="let column of columns"
            [numeric]="column.numeric" [width]="column.width" (click)="parent.rowClick(file)">

                <div class="cell-content">
                        <span class="cell-icon" *ngIf="column.icon"><ng-md-icon [icon]="file.getIcon(column)"></ng-md-icon></span>
                        <span class="cell-value" *ngIf="!column.icon">{{column.format ? column.format(file[column.name]) : file[column.name]}}</span>
                </div>
        </td>
</ng-template>

